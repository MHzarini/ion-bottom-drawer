{"version":3,"file":"ion-bottom-nav-drawer.umd.js.map","sources":["ng://ion-bottom-nav-drawer/lib/drawer-state.ts","ng://ion-bottom-nav-drawer/lib/ion-bottom-nav-drawer.component.ts","ng://ion-bottom-nav-drawer/lib/ion-bottom-nav-drawer.module.ts"],"sourcesContent":["export enum DrawerState {\r\n  Bottom,\r\n  Docked,\r\n  Top\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  Output,\r\n  Renderer2,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { DomController, Platform } from '@ionic/angular';\r\nimport * as Hammer from 'hammerjs';\r\n\r\nimport { DrawerState } from './drawer-state';\r\n\r\n@Component({\r\n  selector: 'ion-bottom-nav-drawer',\r\n  templateUrl: './ion-bottom-nav-drawer.component.html',\r\n  styleUrls: ['./ion-bottom-nav-drawer.component.css'],\r\n})\r\nexport class IonBottomNavDrawerComponent implements AfterViewInit, OnChanges {\r\n\r\n  @Input() dockedHeight: number;\r\n\r\n  @Input() shouldBounce: boolean;\r\n\r\n  @Input() disableDrag: boolean;\r\n\r\n  @Input() distanceTop: number;\r\n\r\n  @Input() transition: string;\r\n\r\n  @Input() state: DrawerState = DrawerState.Bottom;\r\n\r\n  @Input() minimumHeight: number;\r\n\r\n  @Output() stateChange: EventEmitter<DrawerState> = new EventEmitter<DrawerState>();\r\n\r\n  private _startPositionTop: number;\r\n  private readonly _BOUNCE_DELTA = 30;\r\n\r\n  constructor(\r\n    private _element: ElementRef,\r\n    private _renderer: Renderer2,\r\n    private _domCtrl: DomController,\r\n    private _platform: Platform\r\n  ) {\r\n    this.dockedHeight = 50;\r\n    this.shouldBounce = true;\r\n    this.disableDrag = false;\r\n    this.distanceTop = 0;\r\n    this.transition = '0.25s ease-in-out';\r\n    this.minimumHeight = 0;\r\n    this.dockedHeight = 50;\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this._renderer.setStyle(this._element.nativeElement.querySelector('.ion-bottom-drawer-scrollable-content :first-child'),\r\n      'touch-action', 'none');\r\n    this._setDrawerState(this.state);\r\n\r\n    const hammer = new Hammer(this._element.nativeElement);\r\n    hammer.get('pan').set({ enable: true, direction: Hammer.DIRECTION_VERTICAL });\r\n    hammer.on('pan panstart panend', (ev: any) => {\r\n      if (this.disableDrag) {\r\n        return;\r\n      }\r\n      switch (ev.type) {\r\n        case 'panstart':\r\n          this._handlePanStart();\r\n          break;\r\n        case 'panend':\r\n          this._handlePanEnd(ev);\r\n          break;\r\n        default:\r\n          this._handlePan(ev);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (!changes.state) {\r\n      return;\r\n    }\r\n    this._setDrawerState(changes.state.currentValue);\r\n  }\r\n\r\n  private _setDrawerState(state: DrawerState) {\r\n    this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\r\n    switch (state) {\r\n      case DrawerState.Bottom:\r\n        this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\r\n        break;\r\n      case DrawerState.Docked:\r\n        this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\r\n        break;\r\n      default:\r\n        this._setTranslateY(this.distanceTop + 'px');\r\n    }\r\n  }\r\n\r\n  private _handlePanStart() {\r\n    this._startPositionTop = this._element.nativeElement.getBoundingClientRect().top;\r\n  }\r\n\r\n  private _handlePanEnd(ev) {\r\n    if (this.shouldBounce && ev.isFinal) {\r\n      this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\r\n\r\n      switch (this.state) {\r\n        case DrawerState.Docked:\r\n          this._handleDockedPanEnd(ev);\r\n          break;\r\n        case DrawerState.Top:\r\n          this._handleTopPanEnd(ev);\r\n          break;\r\n        default:\r\n          this._handleBottomPanEnd(ev);\r\n      }\r\n    }\r\n    this.stateChange.emit(this.state);\r\n  }\r\n\r\n  private _handleTopPanEnd(ev) {\r\n    if (ev.deltaY > this._BOUNCE_DELTA) {\r\n      this.state = DrawerState.Docked;\r\n    } else {\r\n      this._setTranslateY(this.distanceTop + 'px');\r\n    }\r\n  }\r\n\r\n  private _handleDockedPanEnd(ev) {\r\n    const absDeltaY = Math.abs(ev.deltaY);\r\n    if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY < 0) {\r\n      this.state = DrawerState.Top;\r\n    } else if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY > 0) {\r\n      this.state = DrawerState.Bottom;\r\n    } else {\r\n      this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\r\n    }\r\n  }\r\n\r\n  private _handleBottomPanEnd(ev) {\r\n    if (-ev.deltaY > this._BOUNCE_DELTA) {\r\n      this.state = DrawerState.Docked;\r\n    } else {\r\n      this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\r\n    }\r\n  }\r\n\r\n  private _handlePan(ev) {\r\n    const pointerY = ev.center.y;\r\n    this._renderer.setStyle(this._element.nativeElement, 'transition', 'none');\r\n    if (pointerY > 0 && pointerY < this._platform.height()) {\r\n      if (ev.additionalEvent === 'panup' || ev.additionalEvent === 'pandown') {\r\n        const newTop = this._startPositionTop + ev.deltaY;\r\n        if (newTop >= this.distanceTop) {\r\n          this._setTranslateY(newTop + 'px');\r\n        } else if (newTop < this.distanceTop) {\r\n          this._setTranslateY(this.distanceTop + 'px');\r\n        }\r\n        if (newTop > this._platform.height() - this.minimumHeight) {\r\n          this._setTranslateY((this._platform.height() - this.minimumHeight) + 'px');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _setTranslateY(value) {\r\n    this._domCtrl.write(() => {\r\n      this._renderer.setStyle(this._element.nativeElement, 'transform', 'translateY(' + value + ')');\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { IonBottomNavDrawerComponent } from './ion-bottom-nav-drawer.component';\r\n\r\n@NgModule({\r\n  declarations: [IonBottomNavDrawerComponent],\r\n  imports: [IonicModule],\r\n  exports: [IonBottomNavDrawerComponent]\r\n})\r\nexport class IonBottomNavDrawerModule { }\r\n"],"names":["EventEmitter","Hammer.DIRECTION_VERTICAL","Component","ElementRef","Renderer2","DomController","Platform","Input","Output","NgModule","IonicModule"],"mappings":"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"}
