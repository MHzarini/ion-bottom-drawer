{"version":3,"file":"ion-bottom-nav-drawer.js.map","sources":["ng://ion-bottom-nav-drawer/lib/drawer-state.ts","ng://ion-bottom-nav-drawer/lib/ion-bottom-nav-drawer.component.ts","ng://ion-bottom-nav-drawer/lib/ion-bottom-nav-drawer.module.ts"],"sourcesContent":["export enum DrawerState {\r\n  Bottom,\r\n  Docked,\r\n  Top\r\n}\r\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  Renderer2,\n  SimpleChanges,\n} from '@angular/core';\nimport { DomController, Platform } from '@ionic/angular';\nimport * as Hammer from 'hammerjs';\n\nimport { DrawerState } from './drawer-state';\n\n@Component({\n  selector: 'ion-bottom-nav-drawer',\n  templateUrl: './ion-bottom-nav-drawer.component.html',\n  styleUrls: ['./ion-bottom-nav-drawer.component.css'],\n})\nexport class IonBottomNavDrawerComponent implements AfterViewInit, OnChanges {\n\n  @Input() dockedHeight: number;\n\n  @Input() shouldBounce: boolean;\n\n  @Input() disableDrag: boolean;\n\n  @Input() distanceTop: number;\n\n  @Input() transition: string;\n\n  @Input() state: DrawerState = DrawerState.Bottom;\n\n  @Input() minimumHeight: number;\n\n  @Output() stateChange: EventEmitter<DrawerState> = new EventEmitter<DrawerState>();\n\n  private _startPositionTop: number;\n  private readonly _BOUNCE_DELTA = 30;\n\n  constructor(\n    private _element: ElementRef,\n    private _renderer: Renderer2,\n    private _domCtrl: DomController,\n    private _platform: Platform\n  ) {\n    this.dockedHeight = 50;\n    this.shouldBounce = true;\n    this.disableDrag = false;\n    this.distanceTop = 0;\n    this.transition = '0.25s ease-in-out';\n    this.minimumHeight = 0;\n    this.dockedHeight = 50;\n\n  }\n\n  ngAfterViewInit() {\n    this._renderer.setStyle(this._element.nativeElement.querySelector('.ion-bottom-drawer-scrollable-content :first-child'),\n      'touch-action', 'none');\n    this._setDrawerState(this.state);\n\n    const hammer = new Hammer(this._element.nativeElement);\n    hammer.get('pan').set({ enable: true, direction: Hammer.DIRECTION_VERTICAL });\n    hammer.on('pan panstart panend', (ev: any) => {\n      if (this.disableDrag) {\n        return;\n      }\n      switch (ev.type) {\n        case 'panstart':\n          this._handlePanStart();\n          break;\n        case 'panend':\n          this._handlePanEnd(ev);\n          break;\n        default:\n          this._handlePan(ev);\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (!changes.state) {\n      return;\n    }\n    this._setDrawerState(changes.state.currentValue);\n  }\n\n  private _setDrawerState(state: DrawerState) {\n    this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\n    switch (state) {\n      case DrawerState.Bottom:\n        this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\n        break;\n      case DrawerState.Docked:\n        this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\n        break;\n      default:\n        this._setTranslateY(this.distanceTop + 'px');\n    }\n  }\n\n  private _handlePanStart() {\n    this._startPositionTop = this._element.nativeElement.getBoundingClientRect().top;\n  }\n\n  private _handlePanEnd(ev) {\n    if (this.shouldBounce && ev.isFinal) {\n      this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);\n\n      switch (this.state) {\n        case DrawerState.Docked:\n          this._handleDockedPanEnd(ev);\n          break;\n        case DrawerState.Top:\n          this._handleTopPanEnd(ev);\n          break;\n        default:\n          this._handleBottomPanEnd(ev);\n      }\n    }\n    this.stateChange.emit(this.state);\n  }\n\n  private _handleTopPanEnd(ev) {\n    if (ev.deltaY > this._BOUNCE_DELTA) {\n      this.state = DrawerState.Docked;\n    } else {\n      this._setTranslateY(this.distanceTop + 'px');\n    }\n  }\n\n  private _handleDockedPanEnd(ev) {\n    const absDeltaY = Math.abs(ev.deltaY);\n    if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY < 0) {\n      this.state = DrawerState.Top;\n    } else if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY > 0) {\n      this.state = DrawerState.Bottom;\n    } else {\n      this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');\n    }\n  }\n\n  private _handleBottomPanEnd(ev) {\n    if (-ev.deltaY > this._BOUNCE_DELTA) {\n      this.state = DrawerState.Docked;\n    } else {\n      this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');\n    }\n  }\n\n  private _handlePan(ev) {\n    const pointerY = ev.center.y;\n    this._renderer.setStyle(this._element.nativeElement, 'transition', 'none');\n    if (pointerY > 0 && pointerY < this._platform.height()) {\n      if (ev.additionalEvent === 'panup' || ev.additionalEvent === 'pandown') {\n        const newTop = this._startPositionTop + ev.deltaY;\n        if (newTop >= this.distanceTop) {\n          this._setTranslateY(newTop + 'px');\n        } else if (newTop < this.distanceTop) {\n          this._setTranslateY(this.distanceTop + 'px');\n        }\n        if (newTop > this._platform.height() - this.minimumHeight) {\n          this._setTranslateY((this._platform.height() - this.minimumHeight) + 'px');\n        }\n      }\n    }\n  }\n\n  private _setTranslateY(value) {\n    console.log(value);\n    this._domCtrl.write(() => {\n      this._renderer.setStyle(this._element.nativeElement, 'transform', 'translateY(' + value + ')');\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { IonicModule } from '@ionic/angular';\n\nimport { IonBottomNavDrawerComponent } from './ion-bottom-nav-drawer.component';\n\n@NgModule({\n  declarations: [IonBottomNavDrawerComponent],\n  imports: [IonicModule],\n  exports: [IonBottomNavDrawerComponent]\n})\nexport class IonBottomNavDrawerModule { }\n"],"names":["Hammer.DIRECTION_VERTICAL"],"mappings":"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"}
